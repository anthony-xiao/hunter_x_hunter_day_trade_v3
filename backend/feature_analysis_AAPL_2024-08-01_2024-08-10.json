{
  "market_data_availability": {
    "symbol": "AAPL",
    "records_found": 1000,
    "date_range": "2024-08-01 to 2024-08-10",
    "data_available": true,
    "sample_record": {
      "timestamp": "2024-08-01T08:00:00+00:00",
      "open": 223.8,
      "high": 223.8,
      "low": 223.4,
      "close": 223.43,
      "volume": 2750,
      "vwap": 223.685,
      "transactions": 129
    }
  },
  "spy_data_availability": {
    "records_found": 1000,
    "date_range": "2024-08-01 to 2024-08-10",
    "data_available": true,
    "sample_record": {
      "timestamp": "2024-08-01T08:00:00+00:00",
      "open": 552.26,
      "high": 552.3,
      "low": 552.15,
      "close": 552.15,
      "volume": 1418
    }
  },
  "feature_generation": {
    "success": true,
    "total_features": 148,
    "total_observations": 5828
  },
  "feature_categories": {
    "technical_features": {
      "count": 72,
      "feature_names": [
        "returns",
        "log_returns",
        "sma_5",
        "ema_5",
        "price_to_sma_5",
        "price_to_ema_5",
        "sma_10",
        "ema_10",
        "price_to_sma_10",
        "price_to_ema_10",
        "sma_20",
        "ema_20",
        "price_to_sma_20",
        "price_to_ema_20",
        "sma_50",
        "ema_50",
        "price_to_sma_50",
        "price_to_ema_50",
        "sma_100",
        "ema_100",
        "price_to_sma_100",
        "price_to_ema_100",
        "sma_200",
        "ema_200",
        "price_to_sma_200",
        "price_to_ema_200",
        "volatility_5",
        "realized_vol_5",
        "volatility_10",
        "realized_vol_10",
        "volatility_20",
        "realized_vol_20",
        "volatility_30",
        "realized_vol_30",
        "roc_3",
        "momentum_3",
        "roc_5",
        "momentum_5",
        "roc_10",
        "momentum_10",
        "roc_15",
        "momentum_15",
        "roc_20",
        "momentum_20",
        "rsi_14",
        "rsi_21",
        "rsi_30",
        "macd",
        "macd_signal",
        "macd_histogram",
        "bb_upper_20",
        "bb_lower_20",
        "bb_width_20",
        "bb_position_20",
        "bb_upper_50",
        "bb_lower_50",
        "bb_width_50",
        "bb_position_50",
        "stoch_k",
        "stoch_d",
        "williams_r",
        "atr",
        "atr_pct",
        "cci",
        "mfi",
        "obv",
        "obv_sma",
        "volume_sma_20",
        "volume_ratio",
        "doji",
        "hammer",
        "engulfing"
      ],
      "sample_values": {
        "returns": 0.0,
        "log_returns": 0.0,
        "sma_5": 0.0,
        "ema_5": 0.0,
        "price_to_sma_5": 0.0,
        "price_to_ema_5": 0.0,
        "sma_10": 0.0,
        "ema_10": 0.0,
        "price_to_sma_10": 0.0,
        "price_to_ema_10": 0.0,
        "sma_20": 0.0,
        "ema_20": 0.0,
        "price_to_sma_20": 0.0,
        "price_to_ema_20": 0.0,
        "sma_50": 0.0,
        "ema_50": 0.0,
        "price_to_sma_50": 0.0,
        "price_to_ema_50": 0.0,
        "sma_100": 0.0,
        "ema_100": 0.0,
        "price_to_sma_100": 0.0,
        "price_to_ema_100": 0.0,
        "sma_200": 0.0,
        "ema_200": 0.0,
        "price_to_sma_200": 0.0,
        "price_to_ema_200": 0.0,
        "volatility_5": 0.0,
        "realized_vol_5": 0.0,
        "volatility_10": 0.0,
        "realized_vol_10": 0.0,
        "volatility_20": 0.0,
        "realized_vol_20": 0.0,
        "volatility_30": 0.0,
        "realized_vol_30": 0.0,
        "roc_3": 0.0,
        "momentum_3": 0.0,
        "roc_5": 0.0,
        "momentum_5": 0.0,
        "roc_10": 0.0,
        "momentum_10": 0.0,
        "roc_15": 0.0,
        "momentum_15": 0.0,
        "roc_20": 0.0,
        "momentum_20": 0.0,
        "rsi_14": 0.0,
        "rsi_21": 0.0,
        "rsi_30": 0.0,
        "macd": 0.0,
        "macd_signal": 0.0,
        "macd_histogram": 0.0,
        "bb_upper_20": 0.0,
        "bb_lower_20": 0.0,
        "bb_width_20": 0.0,
        "bb_position_20": 0.0,
        "bb_upper_50": 0.0,
        "bb_lower_50": 0.0,
        "bb_width_50": 0.0,
        "bb_position_50": 0.0,
        "stoch_k": 0.0,
        "stoch_d": 0.0,
        "williams_r": 0.0,
        "atr": 0.0,
        "atr_pct": 0.0,
        "cci": 0.0,
        "mfi": 0.0,
        "obv": 2750.0,
        "obv_sma": 0.0,
        "volume_sma_20": 0.0,
        "volume_ratio": 0.0,
        "doji": 0.0,
        "hammer": 0.0,
        "engulfing": 0.0
      }
    },
    "market_microstructure": {
      "count": 43,
      "feature_names": [
        "spread_proxy",
        "price_impact",
        "tick_direction",
        "consecutive_up",
        "consecutive_down",
        "flow_imbalance",
        "price_vwap_ratio",
        "vwap_deviation",
        "vwap_momentum",
        "vwap_trend_5",
        "vwap_trend_10",
        "vwap_trend_20",
        "avg_trade_size",
        "trade_intensity",
        "transaction_momentum",
        "transaction_volatility",
        "high_frequency_ratio",
        "transactions_ma_5",
        "transactions_ratio_5",
        "transactions_ma_10",
        "transactions_ratio_10",
        "transactions_ma_20",
        "transactions_ratio_20",
        "volume_acceleration",
        "volume_momentum",
        "volume_concentration",
        "volume_profile",
        "price_efficiency",
        "liquidity_proxy",
        "order_flow_toxicity",
        "market_depth_proxy",
        "high_low_ratio",
        "close_to_high",
        "close_to_low",
        "open_to_close",
        "high_to_close",
        "low_to_close",
        "volume_price_trend",
        "price_efficiency_5",
        "price_efficiency_10",
        "price_efficiency_20",
        "spread_ma",
        "volume_clusters"
      ],
      "sample_values": {
        "spread_proxy": 0.0017902698831849155,
        "price_impact": 0.00013454545454496695,
        "tick_direction": 0.0,
        "consecutive_up": 0.0,
        "consecutive_down": 0.0,
        "flow_imbalance": -0.424999989375034,
        "price_vwap_ratio": 0.9988600039788604,
        "vwap_deviation": -0.0011399959764338042,
        "vwap_momentum": 0.0,
        "vwap_trend_5": 0.0,
        "vwap_trend_10": 0.0,
        "vwap_trend_20": 0.0,
        "avg_trade_size": 21.317829455711795,
        "trade_intensity": 129.0,
        "transaction_momentum": 0.0,
        "transaction_volatility": 0.0,
        "high_frequency_ratio": 0.046909090908920335,
        "transactions_ma_5": 0.0,
        "transactions_ratio_5": 0.0,
        "transactions_ma_10": 0.0,
        "transactions_ratio_10": 0.0,
        "transactions_ma_20": 0.0,
        "transactions_ratio_20": 0.0,
        "volume_acceleration": 0.0,
        "volume_momentum": 0.0,
        "volume_concentration": 0.9999999999963637,
        "volume_profile": 2750.0,
        "price_efficiency": 0.0019767441858932404,
        "liquidity_proxy": 10784.313302576142,
        "order_flow_toxicity": 0.0,
        "market_depth_proxy": 1536072.6698820624,
        "high_low_ratio": 1.0017905102954343,
        "close_to_high": 0.9983467381590706,
        "close_to_low": 1.0001342882721576,
        "open_to_close": -0.0016532618409294214,
        "high_to_close": 0.0016559996419460436,
        "low_to_close": 0.00013427024123887184,
        "volume_price_trend": 0.0,
        "price_efficiency_5": 0.0,
        "price_efficiency_10": 0.0,
        "price_efficiency_20": 0.0,
        "spread_ma": 0.0,
        "volume_clusters": 1.0
      }
    },
    "sentiment_features": {
      "count": 8,
      "feature_names": [
        "momentum_sentiment_5",
        "momentum_sentiment_10",
        "momentum_sentiment_20",
        "volume_sentiment",
        "volatility_sentiment",
        "trend_sentiment_10",
        "trend_sentiment_20",
        "trend_sentiment_50"
      ],
      "sample_values": {
        "momentum_sentiment_5": -1.0,
        "momentum_sentiment_10": -1.0,
        "momentum_sentiment_20": -1.0,
        "volume_sentiment": -1.0,
        "volatility_sentiment": 1.0,
        "trend_sentiment_10": -1.0,
        "trend_sentiment_20": -1.0,
        "trend_sentiment_50": -1.0
      }
    },
    "macro_features": {
      "count": 11,
      "feature_names": [
        "hour",
        "day_of_week",
        "month",
        "quarter",
        "is_market_open",
        "is_pre_market",
        "is_after_hours",
        "is_monday",
        "is_friday",
        "is_month_end",
        "is_quarter_end"
      ],
      "sample_values": {
        "hour": 8.0,
        "day_of_week": 3.0,
        "month": 8.0,
        "quarter": 3.0,
        "is_market_open": 0.0,
        "is_pre_market": 1.0,
        "is_after_hours": 0.0,
        "is_monday": 0.0,
        "is_friday": 0.0,
        "is_month_end": 0.0,
        "is_quarter_end": 0.0
      }
    },
    "cross_asset_features": {
      "count": 5,
      "feature_names": [
        "spy_correlation_20",
        "spy_correlation_50",
        "spy_correlation_100",
        "beta_50",
        "beta_100"
      ],
      "sample_values": {
        "spy_correlation_20": 0.0,
        "spy_correlation_50": 0.0,
        "spy_correlation_100": 0.0,
        "beta_50": 0.0,
        "beta_100": 0.0
      }
    },
    "engineered_features": {
      "count": 9,
      "feature_names": [
        "composite_momentum",
        "composite_volatility",
        "composite_trend",
        "risk_adjusted_returns",
        "volume_price_divergence",
        "volatility_regime",
        "mean_reversion_5",
        "mean_reversion_10",
        "mean_reversion_20"
      ],
      "sample_values": {
        "composite_momentum": 0.0,
        "composite_volatility": 0.0,
        "composite_trend": 0.0,
        "risk_adjusted_returns": 0.0,
        "volume_price_divergence": 0.0,
        "volatility_regime": 0.0,
        "mean_reversion_5": 1.0,
        "mean_reversion_10": 1.0,
        "mean_reversion_20": 1.0
      }
    }
  },
  "total_ml_features": 148,
  "missing_features": {
    "cross_asset": {
      "expected": [
        "spy_correlation_20",
        "spy_correlation_50",
        "spy_correlation_100",
        "beta_50",
        "beta_100"
      ],
      "actual": [
        "spy_correlation_20",
        "spy_correlation_50",
        "spy_correlation_100",
        "beta_50",
        "beta_100"
      ],
      "missing": [],
      "missing_count": 0
    },
    "advanced_engineered": {
      "expected": [
        "composite_momentum",
        "composite_volatility",
        "composite_trend",
        "risk_adjusted_returns",
        "volume_price_divergence",
        "volatility_regime",
        "mean_reversion_20",
        "mean_reversion_50",
        "mean_reversion_100"
      ],
      "actual": [
        "composite_momentum",
        "composite_volatility",
        "composite_trend",
        "risk_adjusted_returns",
        "volume_price_divergence",
        "volatility_regime",
        "mean_reversion_5",
        "mean_reversion_10",
        "mean_reversion_20"
      ],
      "missing": [
        "mean_reversion_50",
        "mean_reversion_100"
      ],
      "missing_count": 2
    },
    "total_missing": 2
  },
  "total_feature_count": {
    "ml_features": 148,
    "ohlcv_features": 5,
    "ohlcv_feature_names": [
      "open",
      "high",
      "low",
      "close",
      "volume"
    ],
    "total_features": 153,
    "expected_total": 153,
    "discrepancy": 0
  },
  "training_comparison": {
    "expectations": {
      "total_ml_features": 148,
      "target_total_with_ohlcv": 153,
      "minimum_features_for_training": 150
    },
    "actual_results": {
      "ml_features": 148,
      "total_with_ohlcv": 153
    },
    "meets_minimum_requirement": true,
    "feature_gap": 0
  },
  "training_live_consistency": {
    "feature_engineering_pipeline": "Same FeatureEngineering class used",
    "data_source": "Same Supabase market_data table",
    "feature_categories": "Same categories (technical, microstructure, etc.)",
    "potential_inconsistencies": [
      "Real-time vs batch processing timing",
      "Data availability differences",
      "Caching vs fresh computation"
    ],
    "recommendations": [
      "Ensure SPY data is consistently available",
      "Verify cross-asset feature generation in live trading",
      "Test advanced feature computation with sufficient data"
    ]
  },
  "metadata": {
    "analysis_timestamp": "2025-08-13T12:13:00.376997+00:00",
    "symbol_analyzed": "AAPL",
    "date_range": "2024-08-01 to 2024-08-10",
    "script_version": "1.0",
    "purpose": "Comprehensive feature analysis for ML trading system"
  }
}